//-
    | DESCRIPTION: Main view(Home Page)
    | WORKING: Get the result object from the index.js
    | and loop through it to display our grid boxes
    | TODO: lots of bug fixes and design improvments


extends layout

mixin toPost()
    form(method="POST", action="InsertPost",enctype="multipart/form-data")
        .form-actions
            //input(type="hidden", name="user_name", value="Rushabh Padalia") 
            input(type="text", placeholder="Header goes here..", style="width:100%", name="header").header
            textarea(rows="5", placeholder="Content goes here..", style="width:100%" , name="content")

            input(type="file" ,name="pic" ,accept="image/*")
            input(type="submit").btn.btn-info.btn-block Post
            

// function(mixin) grid
mixin grid(box)
    .profile-display
        img(src='images/me.jpg').img-circle.profile-pic
        small.name #{box.author}
        small.date #{box.date}
    .clear
    if(typeof(box.title) !== 'undefined')
        strong.title #{box.title}
    if(typeof(box.article_image) !== 'undefined')
        .imgholder
            img(src='#{box.article_image[0]}' ,alt="").img-rounded
    else
        .imgholder
            img(src="http://www.inwebson.com/demo/blocksit-js/demo2/images/img23.jpg")
    strongs
    p #{box.content}
    .inputs
        if(box.like_status == false)
            button(type="button", value="#{box.like}").btn.btn-success.like Like #{box.like}
        else
            button(type="button", value="#{box.like}").btn.btn-danger.like Like #{box.like}
        .btn-group
            //- a(href="#",data-toggle="dropdown").btn.btn-warning.dropdown-toggle.share Share
            button(type="button" ,data-toggle="dropdown" ).btn.btn-warning.dropdown-toggle.share Share
                span.caret
            ul.dropdown-menu
                li
                    a(href="http://www.facebook.com") Facebook
                li
                    a(href="http://www.facebook.com") Google+
                li
                    a(href="http://www.facebook.com") Twitter
        button(type="button").btn.btn-primary.comment Comment
        input(type="text").comment-textbox
//-
    | call the function grid using +gride(box)
    | box_obj is the object contaning all the post
    | value of result is passed into box_obj from index.js

block prepend content
    #container-grid
        div(id='topost').grid
            +toPost()
        each box in box_obj
            div(id=box._id).grid
                +grid(box)
    div(tabindex="-1", role="dialog", id="myModal").modal.hide.fade
        .modal-header
            h3#myModalLabel Modal header
        .modal-body
            
        .modal-footer
            textarea(rows="2" ,width="100%").pull-left
            button(type="button").btn.btn-primary.comment.pull-left Comment
